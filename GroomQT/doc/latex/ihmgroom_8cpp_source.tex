\hypertarget{ihmgroom_8cpp_source}{}\subsection{ihmgroom.\+cpp}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include "\hyperlink{ihmgroom_8h}{ihmgroom.h}"}
00002 \textcolor{preprocessor}{#include "ui\_ihmgroom.h"}
00003 \textcolor{preprocessor}{#include "\hyperlink{communicationbluetooth_8h}{communicationbluetooth.h}"}
00004 \textcolor{preprocessor}{#include "ui\_communicationbluetooth.h"}
00005 \textcolor{preprocessor}{#include "\hyperlink{importation_8h}{importation.h}"}
00006 \textcolor{preprocessor}{#include "ui\_importation.h"}
00007 \textcolor{preprocessor}{#include "\hyperlink{messagepersonnalise_8h}{messagepersonnalise.h}"}
00008 \textcolor{preprocessor}{#include "ui\_messagepersonnalise.h"}
00009 \textcolor{preprocessor}{#include "\hyperlink{controle_8h}{controle.h}"}
00010 \textcolor{preprocessor}{#include "\hyperlink{bdd_8h}{bdd.h}"}
00011 \textcolor{preprocessor}{#include "ui\_bdd.h"}
00012 
\Hypertarget{ihmgroom_8cpp_source_l00031}\hyperlink{class_ihm_groom_a44887622008d41828025e2b2ccd598a7}{00031} \hyperlink{class_ihm_groom_a44887622008d41828025e2b2ccd598a7}{IhmGroom::IhmGroom}(\hyperlink{class_q_widget}{QWidget} *parent) : \hyperlink{class_q_widget}{QWidget}(parent), ui(new 
      \hyperlink{namespace_ui}{Ui}::\hyperlink{class_ihm_groom}{IhmGroom})
00032 \{
00033     qDebug() << Q\_FUNC\_INFO;
00034     \hyperlink{class_ihm_groom_af652e1ce199213b7867e44cf589c06b8}{ui}->setupUi(\textcolor{keyword}{this});
00035     setWindowTitle(\hyperlink{ihmgroom_8h_ada54de88f03c1264af632974a72cff76}{NOM\_APP});
00036 
00037     \hyperlink{class_ihm_groom_ab3f9d16d3e20234a71b1580d70ee4959}{ihmImportation} = \textcolor{keyword}{new} \hyperlink{class_importation}{Importation}(\textcolor{keyword}{this});
00038     \hyperlink{class_ihm_groom_a529729b93d7b8d17147d3b47fe9a274d}{messagePersonnalise} = \textcolor{keyword}{new} \hyperlink{class_message_personnalise}{MessagePersonnalise}(\textcolor{keyword}{this});
00039     \hyperlink{class_ihm_groom_a8e2b551df75d8dffdfbc9beb6c3691ba}{communicationBluetooth} = \textcolor{keyword}{new} \hyperlink{class_communication_bluetooth}{CommunicationBluetooth}(\textcolor{keyword}{this});
00040     \hyperlink{class_ihm_groom_acead732c303b50a3285bd311ac8a3b4f}{controle} = \textcolor{keyword}{new} \hyperlink{class_controle}{Controle}(\textcolor{keyword}{this});
00041     \hyperlink{class_ihm_groom_aba1bfff9bc610e6a626d3af4cec266f9}{bdd} = \textcolor{keyword}{new} \hyperlink{class_bdd}{Bdd}(\textcolor{keyword}{this});
00042 
00043     \hyperlink{class_ihm_groom_addfe25c3da6ddecfbdcb5b3cf062d724}{initialiserIconeSysteme}();
00044     connect(\hyperlink{class_ihm_groom_af652e1ce199213b7867e44cf589c06b8}{ui}->pushButton\_5, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(
      \hyperlink{class_ihm_groom_a6a7d6102f1d90172215fd4f1aae6e166}{inversionImageSonnette}()));
00048     \textcolor{comment}{// Test :}
00049     connect(\hyperlink{class_ihm_groom_af652e1ce199213b7867e44cf589c06b8}{ui}->pushButton\_7, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(\hyperlink{class_ihm_groom_a53838a4bd054fe5c85c23eced3eacc8b}{testerNotification}()));
00050     connect(\hyperlink{class_ihm_groom_af652e1ce199213b7867e44cf589c06b8}{ui}->pushButton\_6, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(afficherIhmConfiguration()));
00051 
00052 \}
00053 
\Hypertarget{ihmgroom_8cpp_source_l00059}\hyperlink{class_ihm_groom_a89f5e00d9a36d7162da874b2290274e0}{00059} \hyperlink{class_ihm_groom_a89f5e00d9a36d7162da874b2290274e0}{IhmGroom::~IhmGroom}()
00060 \{
00061     \textcolor{keyword}{delete} \hyperlink{class_ihm_groom_af652e1ce199213b7867e44cf589c06b8}{ui};
00062      qDebug() << Q\_FUNC\_INFO;
00063 \}
00064 
\Hypertarget{ihmgroom_8cpp_source_l00065}\hyperlink{class_ihm_groom_aa270d1fb6a7a9c1385c4ae3e67451ea0}{00065} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_aa270d1fb6a7a9c1385c4ae3e67451ea0}{IhmGroom::changementNom}()
00066 \{
00067     \hyperlink{class_ihm_groom_af652e1ce199213b7867e44cf589c06b8}{ui}->label\_Nom->setWindowTitle(\hyperlink{class_ihm_groom_acead732c303b50a3285bd311ac8a3b4f}{controle}->\hyperlink{class_controle_ac6e8590a5108e97fce3ce3aa43feb881}{getNom}());
00068 \}
00069 
\Hypertarget{ihmgroom_8cpp_source_l00070}\hyperlink{class_ihm_groom_a2e8db190224f15326552a5bd642a9347}{00070} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_a2e8db190224f15326552a5bd642a9347}{IhmGroom::changementPrenom}()
00071 \{
00072     \hyperlink{class_ihm_groom_af652e1ce199213b7867e44cf589c06b8}{ui}->label\_Prenom->setWindowTitle(\hyperlink{class_ihm_groom_acead732c303b50a3285bd311ac8a3b4f}{controle}->\hyperlink{class_controle_a0164fd9066b1703498576095ab5642c5}{getPrenom}());
00073 \}
00074 
\Hypertarget{ihmgroom_8cpp_source_l00075}\hyperlink{class_ihm_groom_afc6c48489b270b22a660e32668d6b2ca}{00075} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_afc6c48489b270b22a660e32668d6b2ca}{IhmGroom::changementFonction}()
00076 \{
00077     \hyperlink{class_ihm_groom_af652e1ce199213b7867e44cf589c06b8}{ui}->label\_Fonction->setWindowTitle(\hyperlink{class_ihm_groom_acead732c303b50a3285bd311ac8a3b4f}{controle}->\hyperlink{class_controle_a8d2891b2b01c503d10f775b4b14a3777}{getFonction}());
00078 \}
00079 
00080 
\Hypertarget{ihmgroom_8cpp_source_l00087}\hyperlink{class_ihm_groom_a8063930f323ce85b679c7598742f325d}{00087} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_a8063930f323ce85b679c7598742f325d}{IhmGroom::closeEvent}(QCloseEvent *event)
00088 \{
00089     \textcolor{keywordflow}{if} (\hyperlink{class_ihm_groom_a9ca0929cf284a9a2e3e2bc3489249919}{iconeSysteme}->isVisible())
00090     \{
00091         \textcolor{keywordflow}{if}(\hyperlink{class_ihm_groom_a95d2d2b4b3b849c1b21f234844fca056}{etatInitialIconeSysteme})
00092         \{
00093             QMessageBox::information(\textcolor{keyword}{this}, \textcolor{stringliteral}{"Groom"}, \textcolor{stringliteral}{"Le programme continue à s'éxécuter. Utiliser le menu
       Quitter pour mettre fin à l'application Groom."});
00094             \hyperlink{class_ihm_groom_a95d2d2b4b3b849c1b21f234844fca056}{etatInitialIconeSysteme} = \textcolor{keyword}{false};
00095         \}
00096         hide();
00097         \textcolor{keyword}{event}->ignore();
00098     \}
00099 \}
00100 
\Hypertarget{ihmgroom_8cpp_source_l00106}\hyperlink{class_ihm_groom_addfe25c3da6ddecfbdcb5b3cf062d724}{00106} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_addfe25c3da6ddecfbdcb5b3cf062d724}{IhmGroom::initialiserIconeSysteme}()
00107 \{
00108     \textcolor{comment}{// Crée les actions}
00109     \hyperlink{class_ihm_groom_a4018ccf7f73329725e4c54002ae72f01}{actionMinimiser} = \textcolor{keyword}{new} QAction(QString::fromUtf8(\textcolor{stringliteral}{"Minimiser"}), \textcolor{keyword}{this});
00110     \hyperlink{class_ihm_groom_aa23dc46d5e223aa20bb84b5bd99d3b81}{actionMaximiser} = \textcolor{keyword}{new} QAction(QString::fromUtf8(\textcolor{stringliteral}{"Maximiser"}), \textcolor{keyword}{this});
00111     \hyperlink{class_ihm_groom_aa2df6badfa16f802411b502228fb8704}{actionRestaurer} = \textcolor{keyword}{new} QAction(QString::fromUtf8(\textcolor{stringliteral}{"Restaurer"}), \textcolor{keyword}{this});
00112     \hyperlink{class_ihm_groom_ab28c091688d25e93b2baf99b4aa90f07}{actionQuitter} = \textcolor{keyword}{new} QAction(QString::fromUtf8(\textcolor{stringliteral}{"&Quitter"}), \textcolor{keyword}{this});
00113 
00114     \textcolor{comment}{// Connecte les actions}
00115     connect(\hyperlink{class_ihm_groom_a4018ccf7f73329725e4c54002ae72f01}{actionMinimiser}, SIGNAL(triggered(\textcolor{keywordtype}{bool})), \textcolor{keyword}{this}, SLOT(hide()));
00116     connect(\hyperlink{class_ihm_groom_aa23dc46d5e223aa20bb84b5bd99d3b81}{actionMaximiser}, SIGNAL(triggered(\textcolor{keywordtype}{bool})), \textcolor{keyword}{this}, SLOT(showMaximized()));
00117     connect(\hyperlink{class_ihm_groom_aa2df6badfa16f802411b502228fb8704}{actionRestaurer}, SIGNAL(triggered(\textcolor{keywordtype}{bool})), \textcolor{keyword}{this}, SLOT(showNormal()));
00118     connect(\hyperlink{class_ihm_groom_ab28c091688d25e93b2baf99b4aa90f07}{actionQuitter}, SIGNAL(triggered(\textcolor{keywordtype}{bool})), qApp, SLOT(quit()));
00119 
00120     \textcolor{comment}{// Crée le menu}
00121     \hyperlink{class_ihm_groom_af2abf22a1a9203af547f32c7edb13710}{menuIconeSysteme} = \textcolor{keyword}{new} QMenu(\textcolor{keyword}{this});
00122     \hyperlink{class_ihm_groom_af2abf22a1a9203af547f32c7edb13710}{menuIconeSysteme}->addAction(\hyperlink{class_ihm_groom_a4018ccf7f73329725e4c54002ae72f01}{actionMinimiser});
00123     \hyperlink{class_ihm_groom_af2abf22a1a9203af547f32c7edb13710}{menuIconeSysteme}->addAction(\hyperlink{class_ihm_groom_aa23dc46d5e223aa20bb84b5bd99d3b81}{actionMaximiser});
00124     \hyperlink{class_ihm_groom_af2abf22a1a9203af547f32c7edb13710}{menuIconeSysteme}->addAction(\hyperlink{class_ihm_groom_aa2df6badfa16f802411b502228fb8704}{actionRestaurer});
00125     \hyperlink{class_ihm_groom_af2abf22a1a9203af547f32c7edb13710}{menuIconeSysteme}->addSeparator();
00126     \hyperlink{class_ihm_groom_af2abf22a1a9203af547f32c7edb13710}{menuIconeSysteme}->addAction(\hyperlink{class_ihm_groom_ab28c091688d25e93b2baf99b4aa90f07}{actionQuitter});
00127 
00128     \textcolor{comment}{// Crée l'icône pour la barre de tâche}
00129     \hyperlink{class_ihm_groom_a9ca0929cf284a9a2e3e2bc3489249919}{iconeSysteme} = \textcolor{keyword}{new} QSystemTrayIcon(\textcolor{keyword}{this});
00130     \hyperlink{class_ihm_groom_a9ca0929cf284a9a2e3e2bc3489249919}{iconeSysteme}->setContextMenu(\hyperlink{class_ihm_groom_af2abf22a1a9203af547f32c7edb13710}{menuIconeSysteme});
00131     \hyperlink{class_ihm_groom_a9ca0929cf284a9a2e3e2bc3489249919}{iconeSysteme}->setToolTip(\textcolor{stringliteral}{"Groom"});
00132     QIcon icone(\textcolor{stringliteral}{":/groom.png"});
00133     \hyperlink{class_ihm_groom_a9ca0929cf284a9a2e3e2bc3489249919}{iconeSysteme}->setIcon(icone);
00134     setWindowIcon(icone);
00135 
00136     connect(\hyperlink{class_ihm_groom_a9ca0929cf284a9a2e3e2bc3489249919}{iconeSysteme}, SIGNAL(messageClicked()), \textcolor{keyword}{this}, SLOT(
      \hyperlink{class_ihm_groom_a428ffaecbab91abb0824ad61afd3109e}{acquitterNotification}()));
00137     \textcolor{comment}{//connect(iconeSysteme, SIGNAL(activated(QSystemTrayIcon::ActivationReason)), this,
       SLOT(aActiveIconeSysteme(QSystemTrayIcon::ActivationReason)));}
00138 
00139     \hyperlink{class_ihm_groom_a9ca0929cf284a9a2e3e2bc3489249919}{iconeSysteme}->show();
00140     \hyperlink{class_ihm_groom_a95d2d2b4b3b849c1b21f234844fca056}{etatInitialIconeSysteme} = \textcolor{keyword}{true};
00141 \}
00142 
\Hypertarget{ihmgroom_8cpp_source_l00151}\hyperlink{class_ihm_groom_a55194db52eca3648aad391274a6bb709}{00151} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_a55194db52eca3648aad391274a6bb709}{IhmGroom::afficherNotification}(QString titre, QString message, \textcolor{keywordtype}{int} duree
      )
00152 \{
00153     QIcon icone(\textcolor{stringliteral}{":/groom.png"});
00154     \hyperlink{class_ihm_groom_a9ca0929cf284a9a2e3e2bc3489249919}{iconeSysteme}->showMessage(titre, message, icone, duree); \textcolor{comment}{// duree en ms}
00155     \textcolor{comment}{/*}
00156 \textcolor{comment}{    QSystemTrayIcon::NoIcon}
00157 \textcolor{comment}{    QSystemTrayIcon::Information}
00158 \textcolor{comment}{    QSystemTrayIcon::Warning}
00159 \textcolor{comment}{    QSystemTrayIcon::Critical}
00160 \textcolor{comment}{    */}
00161     \textcolor{comment}{//QSystemTrayIcon::MessageIcon messageIcone =
       QSystemTrayIcon::MessageIcon(QSystemTrayIcon::Information);}
00162     \textcolor{comment}{//iconeSysteme->showMessage(titre, message, messageIcone, duree);}
00163 \}
00164 
\Hypertarget{ihmgroom_8cpp_source_l00170}\hyperlink{class_ihm_groom_a428ffaecbab91abb0824ad61afd3109e}{00170} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_a428ffaecbab91abb0824ad61afd3109e}{IhmGroom::acquitterNotification}()
00171 \{
00172     qDebug() << Q\_FUNC\_INFO;
00173 \}
00174 
\Hypertarget{ihmgroom_8cpp_source_l00175}\hyperlink{class_ihm_groom_a53838a4bd054fe5c85c23eced3eacc8b}{00175} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_a53838a4bd054fe5c85c23eced3eacc8b}{IhmGroom::testerNotification}()
00176 \{
00177     \hyperlink{class_ihm_groom_a55194db52eca3648aad391274a6bb709}{afficherNotification}(\textcolor{stringliteral}{"Groom"}, \textcolor{stringliteral}{"Rendez-vous annulé !"});
00178 \}
00179 
00180 
\Hypertarget{ihmgroom_8cpp_source_l00181}\hyperlink{class_ihm_groom_a1bbde232f2fb38daedaa4562dfc8d1b5}{00181} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_a1bbde232f2fb38daedaa4562dfc8d1b5}{IhmGroom::on\_pushButton\_6\_clicked}()
00182 \{
00183     \hyperlink{class_ihm_groom_a8e2b551df75d8dffdfbc9beb6c3691ba}{communicationBluetooth}->exec();
00184 \}
00185 
\Hypertarget{ihmgroom_8cpp_source_l00186}\hyperlink{class_ihm_groom_ac69005aef7c31e888d64890eb45c5e64}{00186} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_ac69005aef7c31e888d64890eb45c5e64}{IhmGroom::on\_pushButton\_8\_clicked}()
00187 \{
00188     \hyperlink{class_ihm_groom_ab3f9d16d3e20234a71b1580d70ee4959}{ihmImportation}->exec();
00189 \}
00190 
\Hypertarget{ihmgroom_8cpp_source_l00191}\hyperlink{class_ihm_groom_ad3fbc13397279793b240d54b5a5f20b4}{00191} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_ad3fbc13397279793b240d54b5a5f20b4}{IhmGroom::on\_pushButton\_clicked}()
00192 \{
00193     \hyperlink{class_ihm_groom_a529729b93d7b8d17147d3b47fe9a274d}{messagePersonnalise}->exec();
00194 \}
00195 
\Hypertarget{ihmgroom_8cpp_source_l00196}\hyperlink{class_ihm_groom_a5f8398886e8daa04d5a0f3119f307f14}{00196} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_a5f8398886e8daa04d5a0f3119f307f14}{IhmGroom::on\_pushButton\_9\_clicked}()
00197 \{
00198     \hyperlink{class_ihm_groom_aba1bfff9bc610e6a626d3af4cec266f9}{bdd}->exec();
00199 \}
00200 
\Hypertarget{ihmgroom_8cpp_source_l00201}\hyperlink{class_ihm_groom_a6a7d6102f1d90172215fd4f1aae6e166}{00201} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_a6a7d6102f1d90172215fd4f1aae6e166}{IhmGroom::inversionImageSonnette}()
00202 \{
00203 
00204     \textcolor{keywordflow}{if} (\hyperlink{class_ihm_groom_acead732c303b50a3285bd311ac8a3b4f}{controle}->\hyperlink{class_controle_acabf3768430c7f1acb268ca0fa1ddf99}{getEtatSonnette}())
00205     \{
00206         \hyperlink{class_ihm_groom_af652e1ce199213b7867e44cf589c06b8}{ui}->pushButton\_5->setIcon(QIcon(\textcolor{stringliteral}{":/bellDisable.png"}));
00207 
00208         \hyperlink{class_ihm_groom_acead732c303b50a3285bd311ac8a3b4f}{controle}->\hyperlink{class_controle_ac706c5e9ede46dab70631281b084e233}{setEtatSonnette}(\textcolor{keyword}{false});
00209 
00210     \}
00211     \textcolor{keywordflow}{else}
00212     \{
00213         \hyperlink{class_ihm_groom_af652e1ce199213b7867e44cf589c06b8}{ui}->pushButton\_5->setIcon(QIcon(\textcolor{stringliteral}{":/bellEnable.png"}));
00214         \hyperlink{class_ihm_groom_acead732c303b50a3285bd311ac8a3b4f}{controle}->\hyperlink{class_controle_ac706c5e9ede46dab70631281b084e233}{setEtatSonnette}(\textcolor{keyword}{true});
00215     \}
00216 \}
00217 
00218 
\Hypertarget{ihmgroom_8cpp_source_l00219}\hyperlink{class_ihm_groom_a1d981f0754a5fa2b01036fc5125fded2}{00219} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_a1d981f0754a5fa2b01036fc5125fded2}{IhmGroom::on\_pushButton\_3\_clicked}()
00220 \{
00221     \hyperlink{class_ihm_groom_acead732c303b50a3285bd311ac8a3b4f}{controle}->\hyperlink{class_controle_a62db54114d126d03dd332332b3942320}{setEtatUtilisateur}(\hyperlink{ihmgroom_8h_a508cc209fbc99ea975d1c1ecb5f1c6fe}{LIBRE});
00222 \}
00223 
\Hypertarget{ihmgroom_8cpp_source_l00224}\hyperlink{class_ihm_groom_addb07bf87d4d6f7eb5604d742a6bf2ef}{00224} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_addb07bf87d4d6f7eb5604d742a6bf2ef}{IhmGroom::on\_pushButton\_4\_clicked}()
00225 \{
00226     \hyperlink{class_ihm_groom_acead732c303b50a3285bd311ac8a3b4f}{controle}->\hyperlink{class_controle_a62db54114d126d03dd332332b3942320}{setEtatUtilisateur}(\hyperlink{ihmgroom_8h_a81e3b7fe26a6f7e9e070cccd7faee6bf}{OCCUPE});
00227 \}
00228 
\Hypertarget{ihmgroom_8cpp_source_l00229}\hyperlink{class_ihm_groom_adc890fcb2368c7bf7654d8ed4af4912a}{00229} \textcolor{keywordtype}{void} \hyperlink{class_ihm_groom_adc890fcb2368c7bf7654d8ed4af4912a}{IhmGroom::on\_pushButton\_2\_clicked}()
00230 \{
00231     \hyperlink{class_ihm_groom_acead732c303b50a3285bd311ac8a3b4f}{controle}->\hyperlink{class_controle_a62db54114d126d03dd332332b3942320}{setEtatUtilisateur}(\hyperlink{ihmgroom_8h_a62d1ab4a9b5e2f95388be50a975cc97d}{ABSENT});
00232 \}
00233 
00234 
00235 
00236 
\end{DoxyCode}
